# Energy Sustainability Scoring partner API

EcoStruxure Energy Sustainability Scoring Partner API - JavaScript client for eco_struxure_energy__sustainability_scoring_partner_api
# Overview

EcoStruxureâ„¢ Energy and Sustainability Scoring Partner API allows Building Performance Scores Providers to collect, manage and benchmark buildings measurement data in order to deliver energy and sustainability performance scoring to their customers.

## API overview and usage

This API enables the following features:


**Sites metadata**
- Retrieve all sites belonging to which the connected user has access, along site metadata needed for performance scores calculation (e.g. gross area, building occupants, operating hours, etc)


**Meters and measurement types**
- Retrieve all meters installed at a given site, including the list of measurements and units they support

**Time series**
- Retrieve all timeseries for any given site and for an arbitrary time period
- Room comfort data: zone temperature, humidity, CO2
- Energy consumption: active energy (kWh), reactive energy (kVar) 

**Performance Scores**
* Provide Performance Scores for a given site and read current and historical scores
* Supported Types: Daily, Monthly, Average, Local Average 
* Supported Categories: Energy, Water, Waste, Transportation, Human Experience, Re-Entry


## How it works

This API works for any Energy and Sustainability Scoring application that has a registered Schneider Electric(SE) Customer with an identity in Schneider Electric cIAM system.

The following steps will explain how the API works,

**Step 1:** In order to access the SE customer data, the customer have to provide their consent to the scoring application which is initiated by the application using API security defined in the schema

**Step 2:** Enquire all the sites which the customer is authorized to calculate the performance scores

**Step 3:** Enquire meters and timeseries measurements for a selected site

**Step 4:** Calculate the scores based on the building measurement data received from SE

**Step 5:** Update the performance scores calculated for the given site back to SE 


![How it works](https://raw.githubusercontent.com/ecostruxure-openapi/public-images/main/energy-sustainability-scoring/how-it-works-new.png \"How it works\")


# Documentation
    
## How to sign up
    
**Step 1:** [Register or login](https://exchange.se.com) with an Exchange account.

**Step 2:** Subscribe to the [API product in our Shop](https://exchange.se.com).

**Step 3:** After subscription, API credentials and usage details for the API are available in developer portal.

## Authentication guide

This API supports the following authentication mechanism:

**OAuth2 Authorization Code Flow**
 
  Once subscription to the API is approved on [Exchange](https://exchange.se.com), API Subscription Client ID and Client Secret will be shared with the subscriber
 
  The Client ID should be sent when calling the Authorize Endpoint to initiate the Authorization and Consent flow.
  
  Once user consents to the scopes requested by the client app, an authorization code will be issued which needs to be sent to the Token Endpoint with grant_type as *authorization_code*, along with Client ID and Client Secret in order to retrieve an access_token and a refresh_token. In order to retrieve a new access_token, call the Token endpoint with grant_type as *refresh_token* and pass the refresh_token issued before.
  
  Each access_token is valid for 1 hour and has to be provided to every API call as HTTP Request Header `Authorization: Bearer {access_token}` 


![Authorization Code Flow diagram](https://raw.githubusercontent.com/ecostruxure-openapi/public-images/main/energy-sustainability-scoring/authorization_flow.png \"Authorization Code Flow diagram\")

## Operations and Resource Model

![Operations and Resource Model diagram](https://raw.githubusercontent.com/ecostruxure-openapi/public-images/main/energy-sustainability-scoring/open-esx-energy-scoring.diagram.png \"Operations and Resource Model diagram\")


## Support

Contact the SE Exchange support team at exchange.support@se.com and include.

    - Endpoint URL
    - Request/Response of the URL
    - Any additional information like Screenshots, Postman collections

---
This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 1.0.0
- Package version: 1.0.0
- Build package: org.openapitools.codegen.languages.JavascriptClientCodegen

# Local development

## Getting Started

Please follow the [installation](#installation) instruction and execute the following JS code:

```javascript
var EcoStruxureEnergySustainabilityScoringPartnerApi = require('eco_struxure_energy__sustainability_scoring_partner_api');

var defaultClient = EcoStruxureEnergySustainabilityScoringPartnerApi.ApiClient.instance;
// Configure OAuth2 access token for authorization: Oauth2AuthCode
var Oauth2AuthCode = defaultClient.authentications['Oauth2AuthCode'];
Oauth2AuthCode.accessToken = "YOUR ACCESS TOKEN"

var api = new EcoStruxureEnergySustainabilityScoringPartnerApi.MeterApi()
var siteId = "YOUR SITE ID" // {String} 
var callback = function(error, data, response) {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
};
api.listMeters(siteId, callback);


```
### Compile it yourself, here's how:
 1. git clone https://github.com/ecostruxure-openapi/energy-and-sustainability-scoring.git
 2. cd energy-and-sustainability-scoring/code-samples/javascript
 3. npm install

## Run SDK Example

### Get Sites
Fetch all sites belonging to which the connected user has access, along site metadata like address, geolocation, gross area, building occupants, operating hours, etc

- **file:** Indicates the fileName/API name.
- **token:** Indicates the Apigee token name.

 **Syntax**
 ```bash
 node app.js file=${fileName} token=${accessToken}
 ```
**Example**
```bash
 node app.js file=GetSites token=gA2kT9WyBOf4iisNQ9OpvtIkewlg
 ```

 ### Get Meters
Fetch all meters belonging to which the connected user has access.
- **file:** Indicates the fileName/API name.
- **token:** Indicates the Apigee token name.
- **siteId:** Indicates the siteId.

 **Syntax**
 ```bash
 node app.js file=${fileName}.js siteId=${siteId} token=${token}
 ```
**Example**
```bash
 node app.js file=GetMeters siteId=5664b4a1-85be-44e7-8111-8230a7259fd1 token=gA2kT9WyBOf4iisNQ9OpvtIkewlg
 ```

 ### Get Time Series
Fetch all timeseries belonging to which the connected user has access.
- **file:** Indicates the fileName/API name.
- **token:** Indicates the Apigee token name.
- **siteId:** Indicates the siteId.
- **updatedAtLte:** Indicates the updatedAt start date *Note:* It should be **yyyy-mm-ddThh:mm:ss.000-00:00** format
- **updatedAtGte:** Indicates the updatedAt end date *Note:* It should be **yyyy-mm-ddThh:mm:ss.000-00:00** format

 **Syntax**
 ```bash
 node app.js file=${fileName} token=${accessToken} siteId=${siteId} updatedAtLte=${updatedAtLte} updatedAtGte=${updatedAtGte}
 ```
**Example**
```bash
 node app.js file=GetTimeSeries siteId=b78cfbfe-29eb-4b5d-80eb-d5a1030ceef updatedAtLte=2023-11-24T12:08:56.235-07:00 updatedAtGte=2021-06-01T12:08:56.235-07:00 token=NiNAQ9u9LR6kOT2lSv4uomnfxcz9
 ```

 ### Get Performance Score
The objective is to return the scores (average, daily, monthly, yearly) and based on category(energy) upon siteId.
- **file:** Indicates the fileName/API name.
- **token:** Indicates the Apigee token name.
- **siteId:** Indicates the siteId.
- **type:** Indicates the type.
- **category:** Indicates the category.


 **Syntax**
 ```bash
 node app.js file=${fileName} siteId=${siteId} token=${accessToken} type=${type} category=${category}
 ```
**Example**
```bash
 node app.js file=GetPerformanceScore siteId=e806c0dd-9103-44d7-af93-2d06946c8cde token=1NGRmytRnGR0T1J6MVMZtuA2x6Aw type=daily category=energy
 ```

## Documentation for API Endpoints

All URIs are relative to *https://se-exchange-uat-uat.apigee.net/ecostruxure/scoring/v1*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*EcoStruxureEnergySustainabilityScoringPartnerApi.SiteApi* | [**listSites**](docs/SiteApi.md#listSites) | **GET** /sites | Fetch sites
*EcoStruxureEnergySustainabilityScoringPartnerApi.MeterApi* | [**listMeters**](docs/MeterApi.md#listMeters) | **GET** /sites/{site-id}/meters | Fetch Meters
*EcoStruxureEnergySustainabilityScoringPartnerApi.TimeseriesApi* | [**listMetrics**](docs/TimeseriesApi.md#listMetrics) | **GET** /sites/{site-id}/timeseries | Fetch Timeseries
*EcoStruxureEnergySustainabilityScoringPartnerApi.PerformanceScoreApi* | [**listPerformanceScores**](docs/PerformanceScoreApi.md#listPerformanceScores) | **GET** /sites/{site-id}/performance-scores | Fetch Performance Score

## Documentation for Models

 - [EcoStruxureEnergySustainabilityScoringPartnerApi.Address](docs/Address.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.Coordinates](docs/Coordinates.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.Error](docs/Error.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.ErrorInvalidParamsInner](docs/ErrorInvalidParamsInner.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.Measurement](docs/Measurement.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.MeasurementTimeseries](docs/MeasurementTimeseries.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.Meter](docs/Meter.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.PerformanceScore](docs/PerformanceScore.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.ScoringProvider](docs/ScoringProvider.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.Site](docs/Site.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.SiteMetadata](docs/SiteMetadata.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.Timeserie](docs/Timeserie.md)
 - [EcoStruxureEnergySustainabilityScoringPartnerApi.TimeserieValuesInner](docs/TimeserieValuesInner.md)


## Documentation for Authorization


Authentication schemes defined for the API:
### Oauth2AuthCode


- **Type**: OAuth
- **Flow**: accessCode
- **Authorization URL**: https://se-exchange-uat-uat.apigee.net/ecostruxure/v1/oauth/authorize
- **Scopes**: 
  - read:site: Read access to your site details
  - read:energy-performance: Read access to your site energy performance details
  - write:energy-score: Update access to your site energy score
  - read:energy-score: Read access to your site energy score
  - offline_access: Perform offline operations on behalf of the user